import React, { useState, useEffect } from 'react';
import '../style/styles.css'

const ExerciseList = () => {
    const [exercises, setExercises] = useState([]);
    const [loading, setLoading] = useState(true);
    const [currentPart, setCurrentPart] = useState('Abdominals');
    const body_parts = ["Abdominals", 
                        "Abductors", 
                        "Adductors", 
                        "Biceps", 
                        "Calves", 
                        "Chest", 
                        "Forearms", 
                        "Glutes", 
                        "Hamstrings", 
                        "Lats", 
                        "Lower_back", 
                        "Middle_back", 
                        "Neck", 
                        "Quadriceps", 
                        "Traps", 
                        "Triceps"]

    const handleBodyPart = (muscle) => {
        setLoading(true);
        setCurrentPart(muscle);
        fetch(`/api/exercise/${muscle.toLowerCase()}`)
        .then(response => {
            if (!response.ok) {
                throw new Error(response.status + ': ' + response.statusText);
            }
            return response.json();
        }).then(data => {
            setExercises(data);
            setLoading(false);
        }).catch(error => {
            console.error('Error:', error);
            setLoading(false);
        });
    }

    useEffect(() => {
        setLoading(true);
        fetch('/api/exercise')
        .then(response => {
            if (!response.ok) {
                throw new Error(response.status + ': ' + response.statusText);
            }
            return response.json();
        }).then(data => {
            setExercises(data);
            setLoading(false);
        }).catch(error => {
            console.error('Error:', error);
            setLoading(false);
        });
    }, []);

    if (loading) {
        return ( 
            <div>
                <svg id="loader" width="120" height='110' viewBox="0 0 358 358">
                    <circle id="border" data-name="Ellipse 1 copy" className="border" cx="178.906" cy="178" r="172"/>
                    <circle className="circle" cx="179" cy="177.797" r="148.531"/>
                    <path id="down" d="M176.716,99.8s2.435,2.628,2.956,2.977,3.993,1.575,4.861,2.622,3.471,3.141,3.645,3.838a25.852,25.852,0,0,1,0,3.663c0,0.872-1.734,4.533-2.428,5.579s-2.6,2.442-2.256,2.964-1.137,2.442-1,3.313-0.732.872-.732,1.57,0.6,3.835.732,5.055,1.523,3.312,2.044,4.184a7.386,7.386,0,0,0,2.949,2.615c1.388,0.7,3.644,1.569,4.511,2.79s5.9,9.239,6.419,11.68,0,6.8,0,8.368-1.041,4.01-.694,5.056,0.636,2.966.925,4.272,0.984,4.919,1.331,5.815,0.52,2.814.867,3.685a24.244,24.244,0,0,0,1.041,3.313c0.521,0.872-.867,1.22,0,1.569a2.081,2.081,0,0,1,1.214,1.22,10.163,10.163,0,0,1,.868,1.918c0.347,0.871.347,2.615,0.867,3.051s1.735,3.573,2.082,4.1,2.776,4.706,3.47,5.579a75.784,75.784,0,0,1,3.991,6.8c0.173,0.522,3.816,6.657,3.3,13s-3.47,10.356-5.205,11.925-6.246,3.662-10.236,4.359-8.154,2.441-11.624,3.138-9.889-.349-11.1,0-7.633.245-7.633,0.245,6.592,8.3,8.674,13,4.337,8.588,4.511,9.437,6,13.576,6.868,14.97,2.729,4.882,2.729,4.882v2.789s1.4,1.22,1.925,1.569,1.785,1.395,1.785,1.918a10.138,10.138,0,0,0,.373,2.789c0.347,1.221.534,3.138,0.707,3.835A2.831,2.831,0,0,1,199.45,297a13.217,13.217,0,0,1-.692,2.615c-0.173.523-33.308,1.22-34.349,1.046s-4.337-1.221-4.163-1.918,0.174-.7.174-0.7,0-1.918.521-2.266,1.388-1.744,2.429-1.57,3.123-.7,3.643-0.7a5.227,5.227,0,0,0,1.561-.523s-0.52-.174.868-1.22,4.511-2.267,5.031-2.789a27.153,27.153,0,0,0,2.082-2.267c0.52-.7.867-1.917,1.388-2.615s0.868-2.092,1.561-2.266a3.381,3.381,0,0,0,1.388-1.4s-2.081-4.532-3.122-6.1-6.593-8.179-7.808-9.668-8.327-9.16-8.674-9.857a49.526,49.526,0,0,0-3.817-4.185s-4.164-4.242-5.031-4.94-4.337-4.8-4.337-4.8h-1.215l-1.3-3.682v-1.569a10.329,10.329,0,0,1-1.56-4.533c0-2.092-.216-6.418,7.938-10.705s15.072-6.206,16.46-6.38,7.449-1.394,7.449-1.394l4.965-1.221-0.808-1.917-1.216-.349a1.5,1.5,0,0,1-1.042-1.221,12.58,12.58,0,0,0-.347-3.312c-0.347-1.4-.867-1.046-0.867-2.092s-1.042-1.219-1.042-2.266,0.174-2.513.174-2.513,0,0.382-.521-0.47-1.388-2.073-1.388-2.073l-0.52-1.918-0.521-1.22s-2.6,3.971-3.643,5.211-1.388,2.635-2.255,2.983a3.949,3.949,0,0,1-2.863-.349s-9.889-.523-11.45-0.784-9.109-1.85-9.109-1.85-6.766-1.637-7.2-1.725-2.962-1.046-2.962-1.046a30.017,30.017,0,0,0-4.325-.348,4.3,4.3,0,0,1-1.821.087c-0.434-.087-1.822-0.61-1.822-0.61l-1.128.349a3.638,3.638,0,0,1,0,2.44,3.652,3.652,0,0,1,.608,3.836c-0.954,2.179-2.256,2.44-4.858,2.266a3.835,3.835,0,0,1-3.643-3.836,6.289,6.289,0,0,1-.955-3.486,5.07,5.07,0,0,1,2.429-3.748s-0.173-1.4.347-1.744a11.32,11.32,0,0,0-1.388-1.22,10.693,10.693,0,0,1-1.406-1.4,1.852,1.852,0,0,1,0-.784c0.105-.262.365-0.785,0.365-0.785s-1.3.087-1.127-.7a2.937,2.937,0,0,1,.694-1.308l0.086-.784a1.578,1.578,0,0,1-.8-0.7,1.749,1.749,0,0,1,0-.958l0.45-1.046s-1.215-1.046-1.041-1.482,0.433-.959.433-0.959l1.3-.7,1.215-.175,0.26-.435-0.087-.785a5.035,5.035,0,0,1-2.342-2.354c-0.521-1.481-.867-4.881,1.822-6.45s6.246,0.349,6.679,3.748c0,0,3.557.349,3.9,3.487s-1.388,4.446-1.388,4.446a33.032,33.032,0,0,0,2.516,2.963c0.346,0.175,10.235,2.615,13.359,3.4s12.317,0.261,12.664.349,7.027-.088,7.634-0.524,2.342-6.624,2.776-7.5-0.781-3.225-.781-5.579a21.284,21.284,0,0,1,1.5-5.161c1.313-3.489,3.015-7.3,3.015-7.3s1.995-6.537,2.429-7.845,1.3-3.573,1.3-3.573l0.694-3.226a36.26,36.26,0,0,1-1.822-3.4c-0.173-.611-2.746-6.305-3.267-6.218s-2.146.851-2.66,0.959c-0.429.089-3.21,0.436-3.911-.161a1.447,1.447,0,0,1-.542-1.35,14.107,14.107,0,0,0-.029-1.424,2.161,2.161,0,0,1-1.041-.7c-0.087-.349-0.174-1.4-0.174-1.4s-1.474-.349-1.474-0.7,0.324-.8.334-1.1a2.728,2.728,0,0,0-.864-0.971s-1.639-.2-1.726-0.893a6.782,6.782,0,0,1,.087-1.656s1.128-3.313,1.128-3.661a6.161,6.161,0,0,0-.087-1.86,8.276,8.276,0,0,1-1.07-2.267c-0.086-.726-0.173-6.828.463-8.135,0,0,.144-3.516,1.822-5.666a19.572,19.572,0,0,1,5.9-4.707,12.655,12.655,0,0,1,5.841,0C172.218,99.652,174.852,98.845,176.716,99.8Z"/>
                    <path id="up" d="M175.012,51.635s2.541,2.742,3.085,3.106,4.168,1.643,5.074,2.735,3.624,3.277,3.805,4a26.889,26.889,0,0,1,0,3.822c0,0.909-1.811,4.73-2.535,5.821s-2.716,2.547-2.355,3.093-1.187,2.547-1.046,3.457-0.764.909-.764,1.637,0.624,4,.764,5.275,1.59,3.456,2.134,4.365a7.709,7.709,0,0,0,3.078,2.729c1.449,0.727,3.8,1.637,4.709,2.911s6.157,9.64,6.7,12.187,0,7.093,0,8.73-1.087,4.184-.724,5.275,0.664,3.094.965,4.458,1.027,5.132,1.389,6.066,0.543,2.936.906,3.845a25.319,25.319,0,0,0,1.086,3.456c0.544,0.91-.905,1.274,0,1.637a2.176,2.176,0,0,1,1.268,1.274,10.6,10.6,0,0,1,.905,2c0.363,0.91.363,2.729,0.906,3.183s1.811,3.729,2.173,4.275,2.9,4.911,3.622,5.821c-0.479-.6,6.406,7.267,6.7,14.751a42.1,42.1,0,0,1,0,7.714c-0.437,3.32-2.208,7.26-2.707,9.147-0.946,3.575-8.252,8.631-8.486,9.93S198.2,235.58,198.2,235.58s1.458,10.966.8,16.3-0.717,10.015-1.017,10.868-1.9,15.373-1.87,17.087,0.339,2.015.339,2.015l-0.031,2.91s1.452,1.289,1.991,1.659,1.848,1.475,1.842,2.021a10.628,10.628,0,0,0,.358,2.914c0.349,1.277.522,3.28,0.7,4.009a2.95,2.95,0,0,1-.012,1.819,13.783,13.783,0,0,1-.751,2.72c-0.187.544-34.78,0.9-35.865,0.706s-4.513-1.322-4.324-2.047,0.19-.725.19-0.725,0.022-2,.569-2.359,1.468-1.8,2.552-1.61,3.268-.692,3.811-0.686a5.452,5.452,0,0,0,1.636-.529s-0.541-.188.919-1.263,4.733-2.314,5.283-2.854a28.079,28.079,0,0,0,2.2-2.341c0.551-.722.927-1.99,1.478-2.712s0.929-2.173,1.655-2.347a3.53,3.53,0,0,0,1.464-1.439s3.1-8.309,3.011-10.272-1.522-10.861-1.812-12.846-1.677-12.86-1.614-13.67-0.122-5.607-.122-5.607-1.455-6.033-1.858-7.123-2.275-6.627-2.275-6.627,0.2-.5-1.022-8.825c-1.111-7.573-.469-16.49.008-17.872s2.127-7.628,2.127-7.628l1.145-5.217-1.228-17.935-1.269-.364a1.564,1.564,0,0,1-1.088-1.273,13.127,13.127,0,0,0-.362-3.456c-0.363-1.455-.906-1.091-0.906-2.183s-1.087-1.271-1.087-2.364,0.181-2.622.181-2.622,0,0.4-.543-0.49-1.449-2.163-1.449-2.163l-0.543-2-0.544-1.273s-2.716,4.143-3.8,5.437-1.449,2.749-2.355,3.112a4.122,4.122,0,0,1-2.988-.364s-10.322-.546-11.952-0.819-9.508-1.929-9.508-1.929-7.063-1.708-7.516-1.8-3.091-1.092-3.091-1.092a31.289,31.289,0,0,0-4.515-.363,4.494,4.494,0,0,1-1.9.09c-0.453-.09-1.9-0.636-1.9-0.636l-1.177.364a3.8,3.8,0,0,1,0,2.546,3.808,3.808,0,0,1,.634,4c-1,2.273-2.354,2.546-5.071,2.364a4,4,0,0,1-3.8-4,6.559,6.559,0,0,1-1-3.638,5.288,5.288,0,0,1,2.536-3.911s-0.182-1.455.362-1.819a11.872,11.872,0,0,0-1.449-1.273A11.144,11.144,0,0,1,110.9,142.7a1.942,1.942,0,0,1,0-.818c0.11-.273.381-0.819,0.381-0.819s-1.358.091-1.177-.728a3.072,3.072,0,0,1,.725-1.364l0.09-.818a1.646,1.646,0,0,1-.831-0.728,1.825,1.825,0,0,1,0-1l0.469-1.092s-1.267-1.091-1.086-1.545,0.452-1,.452-1l1.358-.728,1.268-.182,0.272-.454-0.091-.819a5.247,5.247,0,0,1-2.444-2.455c-0.544-1.546-.906-5.093,1.9-6.73s6.52,0.364,6.972,3.91c0,0,3.713.364,4.075,3.638s-1.449,4.639-1.449,4.639a34.56,34.56,0,0,0,2.626,3.092c0.362,0.182,10.685,2.728,13.945,3.546s12.857,0.273,13.22.364,7.334-.091,7.968-0.546,2.445-6.911,2.9-7.821-0.816-3.365-.816-5.82a22.218,22.218,0,0,1,1.562-5.385c1.37-3.64,3.147-7.62,3.147-7.62s2.083-6.821,2.536-8.186,1.358-3.728,1.358-3.728l0.724-3.365a37.72,37.72,0,0,1-1.9-3.546c-0.181-.637-2.868-6.579-3.411-6.488s-2.24.889-2.777,1c-0.447.093-3.35,0.455-4.081-.168a1.512,1.512,0,0,1-.567-1.409c0.037-.473-0.03-1.485-0.03-1.485a2.26,2.26,0,0,1-1.087-.727c-0.091-.364-0.181-1.455-0.181-1.455s-1.539-.364-1.539-0.728,0.338-.834.349-1.147a2.837,2.837,0,0,0-.9-1.013s-1.711-.2-1.8-0.932a7.022,7.022,0,0,1,.09-1.728s1.177-3.456,1.177-3.82a6.413,6.413,0,0,0-.09-1.94,8.63,8.63,0,0,1-1.117-2.364c-0.09-.758-0.181-7.124.483-8.488,0,0,.151-3.668,1.9-5.912a20.424,20.424,0,0,1,6.156-4.911,13.216,13.216,0,0,1,6.1,0C170.316,51.48,173.066,50.638,175.012,51.635Z"/>
                </svg>
            </div>
        )
    }

    return (
        <div className='no-scroll exercise__container'>
            <h1 className='exercise__title'>Exercises</h1>
            <div className='exercise-content'>
                <div className='side__bar'>
                    <h3>Body Parts</h3>
                    {body_parts.map((part, index) => (
                        <button key={index} className='body__part' onClick={() => handleBodyPart(part)}>{part}</button>
                    ))}
                </div>
                <div className='list__exercises'>
                    <h3>{currentPart}</h3>
                    {exercises.map((exercise, index) => (
                        <div key={index}  >
                            <h2 className='exercises'>{exercise.name}</h2>
                            <p className='exercises'>{exercise.instructions}</p>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );
};

export default ExerciseList;

